#include "main.h"
int main()
{
	char *command, **separator, **tokens, *command_path, **commands;
	int index, status;
	
	while (true)
	{
		print_prompt();
		command = read_line();
		separator = get_separators(command);
		if (separator == NULL)
		{
			tokens = parse_line(command);
			command_path = find_executable(tokens);
			child_process(command_path, tokens);
			free(tokens);
		}
		else
		{
			commands = handle_separators(command);
			index = 0;
			while (commands[index] != NULL)
			{
				tokens = parse_line(commands[index]);
				command_path = find_executable(tokens);
				status = child_process(command_path, tokens);
				free(tokens);
				index++;
			}
			free(commands);
		}
		free(command);
	}
	return (0);
}
